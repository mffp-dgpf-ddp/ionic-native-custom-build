{"version":3,"file":"common.js","sourceRoot":"","sources":["../../../../src/@ionic-native/core/decorators/common.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,MAAM,CAAC;AAM7C,MAAM,CAAC,IAAM,yBAAyB,GAAG,EAAE,KAAK,EAAE,uBAAuB,EAAE,CAAC;AAC5E,MAAM,CAAC,IAAM,wBAAwB,GAAG,EAAE,KAAK,EAAE,sBAAsB,EAAE,CAAC;AAE1E,MAAM,UAAU,UAAU,CAAI,QAAuD;IACnF,IAAM,gBAAgB,GAAG;QACvB,IAAI,OAAO,EAAE;YACX,OAAO,IAAI,OAAO,CAAI,UAAC,OAAO,EAAE,MAAM;gBACpC,QAAQ,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YAC5B,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,OAAO,CAAC,KAAK,CACX,0LAA0L,CAC3L,CAAC;SACH;IACH,CAAC,CAAC;IAEF,IAAI,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,OAAO,EAAE;QACnD,IAAM,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC;QAC5B,IAAM,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;QAC9F,IAAI,QAAQ,EAAE;YACZ,IAAM,EAAE,GAAG,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAC9B,OAAO,EAAE,CAAC,UAAC,OAAiB,EAAE,MAAgB;gBAC5C,QAAQ,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YAC5B,CAAC,CAAC,CAAC;SACJ;QACD,OAAO,CAAC,IAAI,CACV,+NAA+N,CAChO,CAAC;KACH;IAED,OAAO,gBAAgB,EAAE,CAAC;AAC5B,CAAC;AAED,MAAM,UAAU,WAAW,CAAC,SAAc,EAAE,UAAkB,EAAE,IAAW,EAAE,IAAyB;IAAzB,qBAAA,EAAA,SAAyB;IACpG,IAAI,YAAiB,EAAE,GAAa,CAAC;IACrC,IAAM,CAAC,GAAG,UAAU,CAAC,UAAC,OAAiB,EAAE,MAAgB;QACvD,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,YAAY,GAAG,iBAAiB,CAC9B,SAAS,EACT,UAAU,EACV,IAAI,EACJ,IAAI,EACJ;gBAAC,cAAc;qBAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;oBAAd,yBAAc;;gBAAK,OAAA,OAAO,CAAC,IAAI,CAAC;YAAb,CAAa,EACjC;gBAAC,cAAc;qBAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;oBAAd,yBAAc;;gBAAK,OAAA,MAAM,CAAC,IAAI,CAAC;YAAZ,CAAY,CACjC,CAAC;SACH;aAAM;YACL,YAAY,GAAG,iBAAiB,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;SACtF;QACD,GAAG,GAAG,MAAM,CAAC;IACf,CAAC,CAAC,CAAC;IACH,2FAA2F;IAC3F,0FAA0F;IAC1F,WAAW;IACX,IAAI,YAAY,IAAI,YAAY,CAAC,KAAK,EAAE;QACtC,CAAC,CAAC,KAAK,CAAC,cAAO,CAAC,CAAC,CAAC;QAClB,OAAO,GAAG,KAAK,UAAU,IAAI,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;KACtD;IACD,OAAO,CAAC,CAAC;AACX,CAAC;AAED,SAAS,gBAAgB,CAAC,SAAc,EAAE,UAAkB,EAAE,IAAW,EAAE,IAAc;IAAd,qBAAA,EAAA,SAAc;IACvF,OAAO,UAAU,CAAC,UAAC,OAAiB,EAAE,MAAgB;QACpD,IAAM,YAAY,GAAG,iBAAiB,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QAC1E,IAAI,YAAY,EAAE;YAChB,IAAI,YAAY,CAAC,KAAK,EAAE;gBACtB,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;aAC5B;iBAAM,IAAI,YAAY,CAAC,IAAI,EAAE;gBAC5B,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;aAC1C;SACF;aAAM;YACL,MAAM,CAAC,EAAE,KAAK,EAAE,kBAAkB,EAAE,CAAC,CAAC;SACvC;IACH,CAAC,CAAC,CAAC;AACL,CAAC;AAED,SAAS,cAAc,CAAC,SAAc,EAAE,UAAkB,EAAE,IAAW,EAAE,IAAc;IAAd,qBAAA,EAAA,SAAc;IACrF,OAAO,IAAI,UAAU,CAAC,UAAA,QAAQ;QAC5B,IAAI,YAAY,CAAC;QAEjB,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,YAAY,GAAG,iBAAiB,CAC9B,SAAS,EACT,UAAU,EACV,IAAI,EACJ,IAAI,EACJ;gBAAC,cAAc;qBAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;oBAAd,yBAAc;;gBAAK,OAAA,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;YAAnB,CAAmB,EACvC;gBAAC,cAAc;qBAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;oBAAd,yBAAc;;gBAAK,OAAA,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC;YAApB,CAAoB,CACzC,CAAC;SACH;aAAM;YACL,YAAY,GAAG,iBAAiB,CAC9B,SAAS,EACT,UAAU,EACV,IAAI,EACJ,IAAI,EACJ,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAC5B,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAC9B,CAAC;SACH;QAED,IAAI,YAAY,IAAI,YAAY,CAAC,KAAK,EAAE;YACtC,QAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;YACnC,QAAQ,CAAC,QAAQ,EAAE,CAAC;SACrB;QACD,OAAO;YACL,IAAI;gBACF,IAAI,IAAI,CAAC,aAAa,EAAE;oBACtB,IAAI,IAAI,CAAC,aAAa,EAAE;wBACtB,OAAO,iBAAiB,CACtB,SAAS,EACT,IAAI,CAAC,aAAa,EAClB,IAAI,EACJ,IAAI,EACJ,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAC5B,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAC9B,CAAC;qBACH;oBACD,OAAO,iBAAiB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;iBAC7D;aACF;YAAC,OAAO,CAAC,EAAE;gBACV,OAAO,CAAC,IAAI,CACV,mDAAmD,EACnD,SAAS,CAAC,WAAW,CAAC,aAAa,EAAE,EACrC,UAAU,CACX,CAAC;gBACF,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACjB;QACH,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AACL,CAAC;AAED;;;;;;GAMG;AACH,SAAS,mBAAmB,CAAC,KAAa,EAAE,OAAY;IACtD,OAAO;QACL,OAAO,MAAM,KAAK,WAAW,IAAI,OAAO;YACtC,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC;YACtB,CAAC,CAAC,OAAO,IAAI,CAAC,OAAO,MAAM,KAAK,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAC/D,OAAO,SAAS,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;AACnC,CAAC;AAiBD,MAAM,UAAU,iBAAiB,CAAC,MAAW,EAAE,UAAmB,EAAE,UAAmB;IACrF,IAAI,SAAS,EAAE,cAAc,EAAE,aAAa,CAAC;IAE7C,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;QAC9B,SAAS,GAAG,MAAM,CAAC;KACpB;SAAM;QACL,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAC9C,UAAU,GAAG,MAAM,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC;QAChD,aAAa,GAAG,MAAM,CAAC,WAAW,CAAC,oBAAoB,EAAE,CAAC;KAC3D;IAED,cAAc,GAAG,SAAS,CAAC,SAAS,CAAC,CAAC;IAEtC,IAAI,CAAC,cAAc,IAAI,CAAC,CAAC,CAAC,UAAU,IAAI,OAAO,cAAc,CAAC,UAAU,CAAC,KAAK,WAAW,CAAC,EAAE;QAC1F,IAAI,OAAO,MAAM,KAAK,WAAW,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;YACpD,WAAW,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YACpC,OAAO,yBAAyB,CAAC;SAClC;QAED,UAAU,CAAC,UAAU,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC;QAClD,OAAO,wBAAwB,CAAC;KACjC;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AAED;;;GAGG;AACH,MAAM,UAAU,oBAAoB,CAAC,SAAc,EAAE,UAAmB;IACtE,OAAO,SAAS,CAAC,eAAe,IAAI,CAAC,CAAC,UAAU,IAAI,OAAO,SAAS,CAAC,eAAe,CAAC,UAAU,CAAC,KAAK,WAAW,CAAC,CAAC;AACpH,CAAC;AAED,MAAM,UAAU,QAAQ,CAAC,IAAW,EAAE,IAAc,EAAE,OAAkB,EAAE,MAAiB;IAArD,qBAAA,EAAA,SAAc;IAClD,yCAAyC;IACzC,IAAI,IAAI,CAAC,IAAI,EAAE;QACb,OAAO,IAAI,CAAC;KACb;IAED,+DAA+D;IAC/D,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE;QACpC,oEAAoE;QACpE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;KACvB;SAAM,IAAI,IAAI,CAAC,aAAa,KAAK,MAAM,EAAE;QACxC,IAAI,CAAC,IAAI,CAAC,UAAC,GAAQ,EAAE,MAAW;YAC9B,IAAI,GAAG,EAAE;gBACP,MAAM,CAAC,GAAG,CAAC,CAAC;aACb;iBAAM;gBACL,OAAO,CAAC,MAAM,CAAC,CAAC;aACjB;QACH,CAAC,CAAC,CAAC;KACJ;SAAM,IAAI,IAAI,CAAC,aAAa,KAAK,QAAQ,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,SAAS,EAAE;QAChF,IAAM,GAAG,GAAQ,EAAE,CAAC;QACpB,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC;QAChC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,MAAM,CAAC;QAC7B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KAChB;SAAM,IAAI,OAAO,IAAI,CAAC,YAAY,KAAK,WAAW,IAAI,OAAO,IAAI,CAAC,UAAU,KAAK,WAAW,EAAE;QAC7F,IAAM,eAAe,GAAG;YACtB,2CAA2C;YAC3C,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,EAAE;gBACnC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC;aACnC;iBAAM;gBACL,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;aAC5C;QACH,CAAC,CAAC;QAEF,IAAM,aAAa,GAAG;YACpB,4GAA4G;YAC5G,kDAAkD;YAClD,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,EAAE;gBACjC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,CAAC,qDAAqD;aACtF;iBAAM;gBACL,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,0CAA0C;aACpF;QACH,CAAC,CAAC;QAEF,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,EAAE;YACvC,aAAa,EAAE,CAAC;YAChB,eAAe,EAAE,CAAC;SACnB;aAAM;YACL,eAAe,EAAE,CAAC;YAClB,aAAa,EAAE,CAAC;SACjB;KACF;SAAM;QACL,gEAAgE;QAChE,wBAAwB;QACxB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACnB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KACnB;IACD,OAAO,IAAI,CAAC;AACd,CAAC;AAED,MAAM,UAAU,iBAAiB,CAC/B,SAAc,EACd,UAAkB,EAClB,IAAW,EACX,IAAc,EACd,OAAkB,EAClB,MAAiB;IAFjB,qBAAA,EAAA,SAAc;IAId,uEAAuE;IACvE,0CAA0C;IAC1C,IAAI,GAAG,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IAE7C,IAAM,iBAAiB,GAAG,iBAAiB,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;IAEnE,IAAI,iBAAiB,KAAK,IAAI,EAAE;QAC9B,IAAM,cAAc,GAAG,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC,CAAC;QACvE,OAAO,cAAc,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;KAC/D;SAAM;QACL,OAAO,iBAAiB,CAAC;KAC1B;AACH,CAAC;AAED,MAAM,UAAU,YAAY,CAC1B,SAAc,EACd,UAAkB,EAClB,IAAW,EACX,IAAc,EACd,OAAkB,EAClB,MAAiB;IAFjB,qBAAA,EAAA,SAAc;IAId,IAAI,GAAG,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IAE7C,IAAI,oBAAoB,CAAC,SAAS,EAAE,UAAU,CAAC,EAAE;QAC/C,OAAO,SAAS,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;KACrF;AACH,CAAC;AAED,MAAM,UAAU,SAAS,CAAC,SAAiB;IACzC,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;QACjC,OAAO,GAAG,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;KAC/B;IACD,OAAO,IAAI,CAAC;AACd,CAAC;AAED,MAAM,UAAU,GAAG,CAAC,OAAyB,EAAE,IAAY;IACzD,IAAM,KAAK,GAAa,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACxC,IAAI,GAAG,GAAQ,OAAO,CAAC;IACvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACrC,IAAI,CAAC,GAAG,EAAE;YACR,OAAO,IAAI,CAAC;SACb;QACD,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;KACrB;IACD,OAAO,GAAG,CAAC;AACb,CAAC;AAED,MAAM,UAAU,UAAU,CAAC,UAAkB,EAAE,MAAe,EAAE,MAAe;IAC7E,IAAI,MAAM,EAAE;QACV,OAAO,CAAC,IAAI,CACV,wBAAwB,GAAG,UAAU,GAAG,GAAG,GAAG,MAAM,GAAG,YAAY,GAAG,UAAU,GAAG,2BAA2B,CAC/G,CAAC;KACH;SAAM;QACL,OAAO,CAAC,IAAI,CAAC,iCAA+B,UAAU,oCAAiC,CAAC,CAAC;KAC1F;IACD,IAAI,MAAM,EAAE;QACV,OAAO,CAAC,IAAI,CAAC,iBAAe,UAAU,2CAAsC,MAAM,MAAG,CAAC,CAAC;KACxF;AACH,CAAC;AAED;;;;GAIG;AACH,MAAM,UAAU,WAAW,CAAC,UAAkB,EAAE,MAAe;IAC7D,IAAI,OAAO,OAAO,KAAK,WAAW,EAAE;QAClC,IAAI,MAAM,EAAE;YACV,OAAO,CAAC,IAAI,CACV,wBAAwB;gBACtB,UAAU;gBACV,GAAG;gBACH,MAAM;gBACN,8FAA8F,CACjG,CAAC;SACH;aAAM;YACL,OAAO,CAAC,IAAI,CACV,8BAA8B;gBAC5B,UAAU;gBACV,oGAAoG,CACvG,CAAC;SACH;KACF;AACH,CAAC;AAMD;;GAEG;AACH,MAAM,CAAC,IAAM,IAAI,GAAG,UAAC,SAAc,EAAE,UAAkB,EAAE,IAAyB;IAAzB,qBAAA,EAAA,SAAyB;IAChF,OAAO;QAAC,cAAc;aAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;YAAd,yBAAc;;QACpB,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,yFAAyF;YACzF,OAAO,iBAAiB,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;SAC7D;aAAM,IAAI,IAAI,CAAC,UAAU,EAAE;YAC1B,OAAO,cAAc,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;SAC1D;aAAM,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,KAAK,EAAE;YAC7C,OAAO,mBAAmB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SACtD;aAAM,IAAI,IAAI,CAAC,YAAY,EAAE;YAC5B,OAAO,gBAAgB,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;SAC5D;aAAM;YACL,OAAO,WAAW,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;SACvD;IACH,CAAC,CAAC;AACJ,CAAC,CAAC;AAEF;;GAEG;AACH,MAAM,UAAU,YAAY,CAAC,SAAc,EAAE,UAAkB,EAAE,IAAc;IAAd,qBAAA,EAAA,SAAc;IAC7E,OAAO;QAAC,cAAc;aAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;YAAd,yBAAc;;QACpB,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,OAAO,YAAY,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;SACxD;aAAM,IAAI,IAAI,CAAC,UAAU,EAAE;YAC1B,OAAO,IAAI,UAAU,CAAC,UAAA,QAAQ;gBAC5B,IAAI,YAAY,CAAC;gBAEjB,IAAI,IAAI,CAAC,QAAQ,EAAE;oBACjB,YAAY,GAAG,YAAY,CACzB,SAAS,EACT,UAAU,EACV,IAAI,EACJ,IAAI,EACJ;wBAAC,cAAc;6BAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;4BAAd,yBAAc;;wBAAK,OAAA,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;oBAAnB,CAAmB,EACvC;wBAAC,cAAc;6BAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;4BAAd,yBAAc;;wBAAK,OAAA,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC;oBAApB,CAAoB,CACzC,CAAC;iBACH;qBAAM;oBACL,YAAY,GAAG,YAAY,CACzB,SAAS,EACT,UAAU,EACV,IAAI,EACJ,IAAI,EACJ,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAC5B,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAC9B,CAAC;iBACH;gBAED,IAAI,YAAY,IAAI,YAAY,CAAC,KAAK,EAAE;oBACtC,QAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;iBACpC;gBAED,OAAO;oBACL,IAAI;wBACF,IAAI,IAAI,CAAC,aAAa,EAAE;4BACtB,OAAO,YAAY,CACjB,SAAS,EACT,IAAI,CAAC,aAAa,EAClB,IAAI,EACJ,IAAI,EACJ,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAC5B,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAC9B,CAAC;yBACH;wBACD,OAAO,YAAY,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;qBACxD;oBAAC,OAAO,CAAC,EAAE;wBACV,OAAO,CAAC,IAAI,CACV,mDAAmD,EACnD,SAAS,CAAC,WAAW,CAAC,aAAa,EAAE,EACrC,UAAU,CACX,CAAC;wBACF,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;qBACjB;gBACH,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;SACJ;aAAM,IAAI,IAAI,CAAC,YAAY,EAAE;YAC5B,OAAO,UAAU,CAAC,UAAC,OAAiB,EAAE,MAAgB;gBACpD,IAAI,MAAM,CAAC;gBACX,IAAI,IAAI,CAAC,QAAQ,EAAE;oBACjB,MAAM,GAAG,YAAY,CACnB,SAAS,EACT,UAAU,EACV,IAAI,EACJ,IAAI,EACJ;wBAAC,cAAc;6BAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;4BAAd,yBAAc;;wBAAK,OAAA,OAAO,CAAC,IAAI,CAAC;oBAAb,CAAa,EACjC;wBAAC,cAAc;6BAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;4BAAd,yBAAc;;wBAAK,OAAA,MAAM,CAAC,IAAI,CAAC;oBAAZ,CAAY,CACjC,CAAC;iBACH;qBAAM;oBACL,MAAM,GAAG,YAAY,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;iBAC3E;gBACD,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE;oBACzB,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;iBAC9B;qBAAM;oBACL,MAAM,EAAE,CAAC;iBACV;YACH,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,cAAiB,EAAE,KAAa,CAAC;YACrC,IAAM,CAAC,GAAG,UAAU,CAAC,UAAC,OAAiB,EAAE,MAAgB;gBACvD,IAAI,IAAI,CAAC,QAAQ,EAAE;oBACjB,cAAY,GAAG,YAAY,CACzB,SAAS,EACT,UAAU,EACV,IAAI,EACJ,IAAI,EACJ;wBAAC,cAAc;6BAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;4BAAd,yBAAc;;wBAAK,OAAA,OAAO,CAAC,IAAI,CAAC;oBAAb,CAAa,EACjC;wBAAC,cAAc;6BAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;4BAAd,yBAAc;;wBAAK,OAAA,MAAM,CAAC,IAAI,CAAC;oBAAZ,CAAY,CACjC,CAAC;iBACH;qBAAM;oBACL,cAAY,GAAG,YAAY,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;iBACjF;gBACD,KAAG,GAAG,MAAM,CAAC;YACf,CAAC,CAAC,CAAC;YACH,2FAA2F;YAC3F,0FAA0F;YAC1F,WAAW;YACX,IAAI,cAAY,IAAI,cAAY,CAAC,KAAK,EAAE;gBACtC,CAAC,CAAC,KAAK,CAAC,cAAO,CAAC,CAAC,CAAC;gBAClB,OAAO,KAAG,KAAK,UAAU,IAAI,KAAG,CAAC,cAAY,CAAC,KAAK,CAAC,CAAC;aACtD;YACD,OAAO,CAAC,CAAC;SACV;IACH,CAAC,CAAC;AACJ,CAAC","sourcesContent":["import { fromEvent, Observable } from 'rxjs';\r\n\r\nimport { CordovaOptions } from './interfaces';\r\n\r\ndeclare const window: any;\r\n\r\nexport const ERR_CORDOVA_NOT_AVAILABLE = { error: 'cordova_not_available' };\r\nexport const ERR_PLUGIN_NOT_INSTALLED = { error: 'plugin_not_installed' };\r\n\r\nexport function getPromise<T>(callback: (resolve: Function, reject?: Function) => any): Promise<T> {\r\n  const tryNativePromise = () => {\r\n    if (Promise) {\r\n      return new Promise<T>((resolve, reject) => {\r\n        callback(resolve, reject);\r\n      });\r\n    } else {\r\n      console.error(\r\n        'No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.'\r\n      );\r\n    }\r\n  };\r\n\r\n  if (typeof window !== 'undefined' && window.angular) {\r\n    const doc = window.document;\r\n    const injector = window.angular.element(doc.querySelector('[ng-app]') || doc.body).injector();\r\n    if (injector) {\r\n      const $q = injector.get('$q');\r\n      return $q((resolve: Function, reject: Function) => {\r\n        callback(resolve, reject);\r\n      });\r\n    }\r\n    console.warn(\r\n      `Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.`\r\n    );\r\n  }\r\n\r\n  return tryNativePromise();\r\n}\r\n\r\nexport function wrapPromise(pluginObj: any, methodName: string, args: any[], opts: CordovaOptions = {}) {\r\n  let pluginResult: any, rej: Function;\r\n  const p = getPromise((resolve: Function, reject: Function) => {\r\n    if (opts.destruct) {\r\n      pluginResult = callCordovaPlugin(\r\n        pluginObj,\r\n        methodName,\r\n        args,\r\n        opts,\r\n        (...args: any[]) => resolve(args),\r\n        (...args: any[]) => reject(args)\r\n      );\r\n    } else {\r\n      pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, resolve, reject);\r\n    }\r\n    rej = reject;\r\n  });\r\n  // Angular throws an error on unhandled rejection, but in this case we have already printed\r\n  // a warning that Cordova is undefined or the plugin is uninstalled, so there is no reason\r\n  // to error\r\n  if (pluginResult && pluginResult.error) {\r\n    p.catch(() => {});\r\n    typeof rej === 'function' && rej(pluginResult.error);\r\n  }\r\n  return p;\r\n}\r\n\r\nfunction wrapOtherPromise(pluginObj: any, methodName: string, args: any[], opts: any = {}) {\r\n  return getPromise((resolve: Function, reject: Function) => {\r\n    const pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts);\r\n    if (pluginResult) {\r\n      if (pluginResult.error) {\r\n        reject(pluginResult.error);\r\n      } else if (pluginResult.then) {\r\n        pluginResult.then(resolve).catch(reject);\r\n      }\r\n    } else {\r\n      reject({ error: 'unexpected_error' });\r\n    }\r\n  });\r\n}\r\n\r\nfunction wrapObservable(pluginObj: any, methodName: string, args: any[], opts: any = {}) {\r\n  return new Observable(observer => {\r\n    let pluginResult;\r\n\r\n    if (opts.destruct) {\r\n      pluginResult = callCordovaPlugin(\r\n        pluginObj,\r\n        methodName,\r\n        args,\r\n        opts,\r\n        (...args: any[]) => observer.next(args),\r\n        (...args: any[]) => observer.error(args)\r\n      );\r\n    } else {\r\n      pluginResult = callCordovaPlugin(\r\n        pluginObj,\r\n        methodName,\r\n        args,\r\n        opts,\r\n        observer.next.bind(observer),\r\n        observer.error.bind(observer)\r\n      );\r\n    }\r\n\r\n    if (pluginResult && pluginResult.error) {\r\n      observer.error(pluginResult.error);\r\n      observer.complete();\r\n    }\r\n    return () => {\r\n      try {\r\n        if (opts.clearFunction) {\r\n          if (opts.clearWithArgs) {\r\n            return callCordovaPlugin(\r\n              pluginObj,\r\n              opts.clearFunction,\r\n              args,\r\n              opts,\r\n              observer.next.bind(observer),\r\n              observer.error.bind(observer)\r\n            );\r\n          }\r\n          return callCordovaPlugin(pluginObj, opts.clearFunction, []);\r\n        }\r\n      } catch (e) {\r\n        console.warn(\r\n          'Unable to clear the previous observable watch for',\r\n          pluginObj.constructor.getPluginName(),\r\n          methodName\r\n        );\r\n        console.warn(e);\r\n      }\r\n    };\r\n  });\r\n}\r\n\r\n/**\r\n * Wrap the event with an observable\r\n * @private\r\n * @param event event name\r\n * @param element The element to attach the event listener to\r\n * @returns {Observable}\r\n */\r\nfunction wrapEventObservable(event: string, element: any): Observable<any> {\r\n  element =\r\n    typeof window !== 'undefined' && element\r\n      ? get(window, element)\r\n      : element || (typeof window !== 'undefined' ? window : {});\r\n  return fromEvent(element, event);\r\n}\r\n\r\n/**\r\n * Checks if plugin/cordova is available\r\n * @return {boolean | { error: string } }\r\n * @private\r\n */\r\nexport function checkAvailability(\r\n  pluginRef: string,\r\n  methodName?: string,\r\n  pluginName?: string\r\n): boolean | { error: string };\r\nexport function checkAvailability(\r\n  pluginObj: any,\r\n  methodName?: string,\r\n  pluginName?: string\r\n): boolean | { error: string };\r\nexport function checkAvailability(plugin: any, methodName?: string, pluginName?: string): boolean | { error: string } {\r\n  let pluginRef, pluginInstance, pluginPackage;\r\n\r\n  if (typeof plugin === 'string') {\r\n    pluginRef = plugin;\r\n  } else {\r\n    pluginRef = plugin.constructor.getPluginRef();\r\n    pluginName = plugin.constructor.getPluginName();\r\n    pluginPackage = plugin.constructor.getPluginInstallName();\r\n  }\r\n\r\n  pluginInstance = getPlugin(pluginRef);\r\n\r\n  if (!pluginInstance || (!!methodName && typeof pluginInstance[methodName] === 'undefined')) {\r\n    if (typeof window === 'undefined' || !window.cordova) {\r\n      cordovaWarn(pluginName, methodName);\r\n      return ERR_CORDOVA_NOT_AVAILABLE;\r\n    }\r\n\r\n    pluginWarn(pluginName, pluginPackage, methodName);\r\n    return ERR_PLUGIN_NOT_INSTALLED;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Checks if _objectInstance exists and has the method/property\r\n * @private\r\n */\r\nexport function instanceAvailability(pluginObj: any, methodName?: string): boolean {\r\n  return pluginObj._objectInstance && (!methodName || typeof pluginObj._objectInstance[methodName] !== 'undefined');\r\n}\r\n\r\nexport function setIndex(args: any[], opts: any = {}, resolve?: Function, reject?: Function): any {\r\n  // ignore resolve and reject in case sync\r\n  if (opts.sync) {\r\n    return args;\r\n  }\r\n\r\n  // If the plugin method expects myMethod(success, err, options)\r\n  if (opts.callbackOrder === 'reverse') {\r\n    // Get those arguments in the order [resolve, reject, ...restOfArgs]\r\n    args.unshift(reject);\r\n    args.unshift(resolve);\r\n  } else if (opts.callbackStyle === 'node') {\r\n    args.push((err: any, result: any) => {\r\n      if (err) {\r\n        reject(err);\r\n      } else {\r\n        resolve(result);\r\n      }\r\n    });\r\n  } else if (opts.callbackStyle === 'object' && opts.successName && opts.errorName) {\r\n    const obj: any = {};\r\n    obj[opts.successName] = resolve;\r\n    obj[opts.errorName] = reject;\r\n    args.push(obj);\r\n  } else if (typeof opts.successIndex !== 'undefined' || typeof opts.errorIndex !== 'undefined') {\r\n    const setSuccessIndex = () => {\r\n      // If we've specified a success/error index\r\n      if (opts.successIndex > args.length) {\r\n        args[opts.successIndex] = resolve;\r\n      } else {\r\n        args.splice(opts.successIndex, 0, resolve);\r\n      }\r\n    };\r\n\r\n    const setErrorIndex = () => {\r\n      // We don't want that the reject cb gets spliced into the position of an optional argument that has not been\r\n      // defined and thus causing non expected behavior.\r\n      if (opts.errorIndex > args.length) {\r\n        args[opts.errorIndex] = reject; // insert the reject fn at the correct specific index\r\n      } else {\r\n        args.splice(opts.errorIndex, 0, reject); // otherwise just splice it into the array\r\n      }\r\n    };\r\n\r\n    if (opts.successIndex > opts.errorIndex) {\r\n      setErrorIndex();\r\n      setSuccessIndex();\r\n    } else {\r\n      setSuccessIndex();\r\n      setErrorIndex();\r\n    }\r\n  } else {\r\n    // Otherwise, let's tack them on to the end of the argument list\r\n    // which is 90% of cases\r\n    args.push(resolve);\r\n    args.push(reject);\r\n  }\r\n  return args;\r\n}\r\n\r\nexport function callCordovaPlugin(\r\n  pluginObj: any,\r\n  methodName: string,\r\n  args: any[],\r\n  opts: any = {},\r\n  resolve?: Function,\r\n  reject?: Function\r\n) {\r\n  // Try to figure out where the success/error callbacks need to be bound\r\n  // to our promise resolve/reject handlers.\r\n  args = setIndex(args, opts, resolve, reject);\r\n\r\n  const availabilityCheck = checkAvailability(pluginObj, methodName);\r\n\r\n  if (availabilityCheck === true) {\r\n    const pluginInstance = getPlugin(pluginObj.constructor.getPluginRef());\r\n    return pluginInstance[methodName].apply(pluginInstance, args);\r\n  } else {\r\n    return availabilityCheck;\r\n  }\r\n}\r\n\r\nexport function callInstance(\r\n  pluginObj: any,\r\n  methodName: string,\r\n  args: any[],\r\n  opts: any = {},\r\n  resolve?: Function,\r\n  reject?: Function\r\n) {\r\n  args = setIndex(args, opts, resolve, reject);\r\n\r\n  if (instanceAvailability(pluginObj, methodName)) {\r\n    return pluginObj._objectInstance[methodName].apply(pluginObj._objectInstance, args);\r\n  }\r\n}\r\n\r\nexport function getPlugin(pluginRef: string): any {\r\n  if (typeof window !== 'undefined') {\r\n    return get(window, pluginRef);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function get(element: Element | Window, path: string) {\r\n  const paths: string[] = path.split('.');\r\n  let obj: any = element;\r\n  for (let i = 0; i < paths.length; i++) {\r\n    if (!obj) {\r\n      return null;\r\n    }\r\n    obj = obj[paths[i]];\r\n  }\r\n  return obj;\r\n}\r\n\r\nexport function pluginWarn(pluginName: string, plugin?: string, method?: string): void {\r\n  if (method) {\r\n    console.warn(\r\n      'Native: tried calling ' + pluginName + '.' + method + ', but the ' + pluginName + ' plugin is not installed.'\r\n    );\r\n  } else {\r\n    console.warn(`Native: tried accessing the ${pluginName} plugin but it's not installed.`);\r\n  }\r\n  if (plugin) {\r\n    console.warn(`Install the ${pluginName} plugin: 'ionic cordova plugin add ${plugin}'`);\r\n  }\r\n}\r\n\r\n/**\r\n * @private\r\n * @param pluginName\r\n * @param method\r\n */\r\nexport function cordovaWarn(pluginName: string, method?: string): void {\r\n  if (typeof process === 'undefined') {\r\n    if (method) {\r\n      console.warn(\r\n        'Native: tried calling ' +\r\n          pluginName +\r\n          '.' +\r\n          method +\r\n          ', but Cordova is not available. Make sure to include cordova.js or run in a device/simulator'\r\n      );\r\n    } else {\r\n      console.warn(\r\n        'Native: tried accessing the ' +\r\n          pluginName +\r\n          ' plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator'\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n// Fixes a bug in TypeScript 2.9.2 where the ...args is being converted into args: {} and\r\n// causing compilation issues\r\nexport type WrapFn = (...args: any[]) => any;\r\n\r\n/**\r\n * @private\r\n */\r\nexport const wrap = (pluginObj: any, methodName: string, opts: CordovaOptions = {}): WrapFn => {\r\n  return (...args: any[]) => {\r\n    if (opts.sync) {\r\n      // Sync doesn't wrap the plugin with a promise or observable, it returns the result as-is\r\n      return callCordovaPlugin(pluginObj, methodName, args, opts);\r\n    } else if (opts.observable) {\r\n      return wrapObservable(pluginObj, methodName, args, opts);\r\n    } else if (opts.eventObservable && opts.event) {\r\n      return wrapEventObservable(opts.event, opts.element);\r\n    } else if (opts.otherPromise) {\r\n      return wrapOtherPromise(pluginObj, methodName, args, opts);\r\n    } else {\r\n      return wrapPromise(pluginObj, methodName, args, opts);\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nexport function wrapInstance(pluginObj: any, methodName: string, opts: any = {}): Function {\r\n  return (...args: any[]) => {\r\n    if (opts.sync) {\r\n      return callInstance(pluginObj, methodName, args, opts);\r\n    } else if (opts.observable) {\r\n      return new Observable(observer => {\r\n        let pluginResult;\r\n\r\n        if (opts.destruct) {\r\n          pluginResult = callInstance(\r\n            pluginObj,\r\n            methodName,\r\n            args,\r\n            opts,\r\n            (...args: any[]) => observer.next(args),\r\n            (...args: any[]) => observer.error(args)\r\n          );\r\n        } else {\r\n          pluginResult = callInstance(\r\n            pluginObj,\r\n            methodName,\r\n            args,\r\n            opts,\r\n            observer.next.bind(observer),\r\n            observer.error.bind(observer)\r\n          );\r\n        }\r\n\r\n        if (pluginResult && pluginResult.error) {\r\n          observer.error(pluginResult.error);\r\n        }\r\n\r\n        return () => {\r\n          try {\r\n            if (opts.clearWithArgs) {\r\n              return callInstance(\r\n                pluginObj,\r\n                opts.clearFunction,\r\n                args,\r\n                opts,\r\n                observer.next.bind(observer),\r\n                observer.error.bind(observer)\r\n              );\r\n            }\r\n            return callInstance(pluginObj, opts.clearFunction, []);\r\n          } catch (e) {\r\n            console.warn(\r\n              'Unable to clear the previous observable watch for',\r\n              pluginObj.constructor.getPluginName(),\r\n              methodName\r\n            );\r\n            console.warn(e);\r\n          }\r\n        };\r\n      });\r\n    } else if (opts.otherPromise) {\r\n      return getPromise((resolve: Function, reject: Function) => {\r\n        let result;\r\n        if (opts.destruct) {\r\n          result = callInstance(\r\n            pluginObj,\r\n            methodName,\r\n            args,\r\n            opts,\r\n            (...args: any[]) => resolve(args),\r\n            (...args: any[]) => reject(args)\r\n          );\r\n        } else {\r\n          result = callInstance(pluginObj, methodName, args, opts, resolve, reject);\r\n        }\r\n        if (result && result.then) {\r\n          result.then(resolve, reject);\r\n        } else {\r\n          reject();\r\n        }\r\n      });\r\n    } else {\r\n      let pluginResult: any, rej: Function;\r\n      const p = getPromise((resolve: Function, reject: Function) => {\r\n        if (opts.destruct) {\r\n          pluginResult = callInstance(\r\n            pluginObj,\r\n            methodName,\r\n            args,\r\n            opts,\r\n            (...args: any[]) => resolve(args),\r\n            (...args: any[]) => reject(args)\r\n          );\r\n        } else {\r\n          pluginResult = callInstance(pluginObj, methodName, args, opts, resolve, reject);\r\n        }\r\n        rej = reject;\r\n      });\r\n      // Angular throws an error on unhandled rejection, but in this case we have already printed\r\n      // a warning that Cordova is undefined or the plugin is uninstalled, so there is no reason\r\n      // to error\r\n      if (pluginResult && pluginResult.error) {\r\n        p.catch(() => {});\r\n        typeof rej === 'function' && rej(pluginResult.error);\r\n      }\r\n      return p;\r\n    }\r\n  };\r\n}\r\n"]}