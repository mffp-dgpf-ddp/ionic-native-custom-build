import { __decorate, __extends } from "tslib";
import { Injectable } from '@angular/core';
import { IonicNativePlugin, cordova } from '@ionic-native/core';
import { Observable } from 'rxjs';
var BLE = /** @class */ (function (_super) {
    __extends(BLE, _super);
    function BLE() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BLE.prototype.scan = function (services, seconds) { return cordova(this, "scan", { "observable": true }, arguments); };
    BLE.prototype.startScan = function (services) { return cordova(this, "startScan", { "observable": true, "clearFunction": "stopScan", "clearWithArgs": false }, arguments); };
    BLE.prototype.startScanWithOptions = function (services, options) { return cordova(this, "startScanWithOptions", { "observable": true, "clearFunction": "stopScan", "clearWithArgs": false }, arguments); };
    BLE.prototype.stopScan = function () { return cordova(this, "stopScan", {}, arguments); };
    BLE.prototype.connect = function (deviceId) { return cordova(this, "connect", { "observable": true, "clearFunction": "disconnect", "clearWithArgs": true }, arguments); };
    BLE.prototype.autoConnect = function (deviceId, connectCallback, disconnectCallback) { return cordova(this, "autoConnect", { "sync": true }, arguments); };
    BLE.prototype.requestMtu = function (deviceId, mtuSize) { return cordova(this, "requestMtu", {}, arguments); };
    BLE.prototype.refreshDeviceCache = function (deviceId, timeoutMillis) { return cordova(this, "refreshDeviceCache", {}, arguments); };
    BLE.prototype.disconnect = function (deviceId) { return cordova(this, "disconnect", {}, arguments); };
    BLE.prototype.read = function (deviceId, serviceUUID, characteristicUUID) { return cordova(this, "read", {}, arguments); };
    BLE.prototype.write = function (deviceId, serviceUUID, characteristicUUID, value) { return cordova(this, "write", {}, arguments); };
    BLE.prototype.writeWithoutResponse = function (deviceId, serviceUUID, characteristicUUID, value) { return cordova(this, "writeWithoutResponse", {}, arguments); };
    BLE.prototype.startNotification = function (deviceId, serviceUUID, characteristicUUID) { return cordova(this, "startNotification", { "observable": true, "destruct": true, "clearFunction": "stopNotification", "clearWithArgs": true }, arguments); };
    BLE.prototype.stopNotification = function (deviceId, serviceUUID, characteristicUUID) { return cordova(this, "stopNotification", {}, arguments); };
    BLE.prototype.isConnected = function (deviceId) { return cordova(this, "isConnected", {}, arguments); };
    BLE.prototype.isEnabled = function () { return cordova(this, "isEnabled", {}, arguments); };
    BLE.prototype.startStateNotifications = function () { return cordova(this, "startStateNotifications", { "observable": true, "clearFunction": "stopStateNotifications", "clearWithArgs": false }, arguments); };
    BLE.prototype.stopStateNotifications = function () { return cordova(this, "stopStateNotifications", {}, arguments); };
    BLE.prototype.showBluetoothSettings = function () { return cordova(this, "showBluetoothSettings", {}, arguments); };
    BLE.prototype.enable = function () { return cordova(this, "enable", {}, arguments); };
    BLE.prototype.readRSSI = function (deviceId) { return cordova(this, "readRSSI", {}, arguments); };
    BLE.prototype.connectedPeripheralsWithServices = function (services) { return cordova(this, "connectedPeripheralsWithServices", {}, arguments); };
    BLE.prototype.peripheralsWithIdentifiers = function (uuids) { return cordova(this, "peripheralsWithIdentifiers", {}, arguments); };
    BLE.prototype.bondedDevices = function () { return cordova(this, "bondedDevices", {}, arguments); };
    BLE.prototype.isLocationEnabled = function () { return cordova(this, "isLocationEnabled", {}, arguments); };
    BLE.pluginName = "BLE";
    BLE.plugin = "cordova-plugin-ble-central";
    BLE.pluginRef = "ble";
    BLE.repo = "https://github.com/don/cordova-plugin-ble-central";
    BLE.platforms = ["Android", "iOS"];
    BLE = __decorate([
        Injectable()
    ], BLE);
    return BLE;
}(IonicNativePlugin));
export { BLE };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvQGlvbmljLW5hdGl2ZS9wbHVnaW5zL2JsZS9uZ3gvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyw4QkFBc0MsTUFBTSxvQkFBb0IsQ0FBQztBQUN4RSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sTUFBTSxDQUFDOztJQXVMVCx1QkFBaUI7Ozs7SUFpQnhDLGtCQUFJLGFBQUMsUUFBa0IsRUFBRSxPQUFlO0lBeUJ4Qyx1QkFBUyxhQUFDLFFBQWtCO0lBZTVCLGtDQUFvQixhQUFDLFFBQWtCLEVBQUUsT0FBdUI7SUFtQmhFLHNCQUFRO0lBdUJSLHFCQUFPLGFBQUMsUUFBZ0I7SUFnQ3hCLHlCQUFXLGFBQUMsUUFBZ0IsRUFBRSxlQUFvQixFQUFFLGtCQUF1QjtJQW9CM0Usd0JBQVUsYUFBQyxRQUFnQixFQUFFLE9BQWU7SUFzQjVDLGdDQUFrQixhQUFDLFFBQWdCLEVBQUUsYUFBcUI7SUFnQjFELHdCQUFVLGFBQUMsUUFBZ0I7SUFhM0Isa0JBQUksYUFBQyxRQUFnQixFQUFFLFdBQW1CLEVBQUUsa0JBQTBCO0lBaUN0RSxtQkFBSyxhQUFDLFFBQWdCLEVBQUUsV0FBbUIsRUFBRSxrQkFBMEIsRUFBRSxLQUFrQjtJQWMzRixrQ0FBb0IsYUFDbEIsUUFBZ0IsRUFDaEIsV0FBbUIsRUFDbkIsa0JBQTBCLEVBQzFCLEtBQWtCO0lBNEJwQiwrQkFBaUIsYUFBQyxRQUFnQixFQUFFLFdBQW1CLEVBQUUsa0JBQTBCO0lBYW5GLDhCQUFnQixhQUFDLFFBQWdCLEVBQUUsV0FBbUIsRUFBRSxrQkFBMEI7SUFrQmxGLHlCQUFXLGFBQUMsUUFBZ0I7SUFVNUIsdUJBQVM7SUFxQlQscUNBQXVCO0lBVXZCLG9DQUFzQjtJQVV0QixtQ0FBcUI7SUFVckIsb0JBQU07SUFZTixzQkFBUSxhQUFDLFFBQWdCO0lBYXpCLDhDQUFnQyxhQUFDLFFBQWtCO0lBWW5ELHdDQUEwQixhQUFDLEtBQWU7SUFXMUMsMkJBQWE7SUFXYiwrQkFBaUI7Ozs7OztJQWhiTixHQUFHO1FBRGYsVUFBVSxFQUFFO09BQ0EsR0FBRztjQXpMaEI7RUF5THlCLGlCQUFpQjtTQUE3QixHQUFHIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb3Jkb3ZhLCBJb25pY05hdGl2ZVBsdWdpbiwgUGx1Z2luIH0gZnJvbSAnQGlvbmljLW5hdGl2ZS9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCTEVTY2FuT3B0aW9ucyB7XHJcbiAgLyoqIHRydWUgaWYgZHVwbGljYXRlIGRldmljZXMgc2hvdWxkIGJlIHJlcG9ydGVkLCBmYWxzZSAoZGVmYXVsdCkgaWYgZGV2aWNlcyBzaG91bGQgb25seSBiZSByZXBvcnRlZCBvbmNlLiAgKi9cclxuICByZXBvcnREdXBsaWNhdGVzPzogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuYW1lIEJMRVxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhpcyBwbHVnaW4gZW5hYmxlcyBjb21tdW5pY2F0aW9uIGJldHdlZW4gYSBwaG9uZSBhbmQgQmx1ZXRvb3RoIExvdyBFbmVyZ3kgKEJMRSkgcGVyaXBoZXJhbHMuXHJcbiAqXHJcbiAqIFRoZSBwbHVnaW4gcHJvdmlkZXMgYSBzaW1wbGUgSmF2YVNjcmlwdCBBUEkgZm9yIGlPUyBhbmQgQW5kcm9pZC5cclxuICpcclxuICogLSBTY2FuIGZvciBwZXJpcGhlcmFsc1xyXG4gKiAtIENvbm5lY3QgdG8gYSBwZXJpcGhlcmFsXHJcbiAqIC0gUmVhZCB0aGUgdmFsdWUgb2YgYSBjaGFyYWN0ZXJpc3RpY1xyXG4gKiAtIFdyaXRlIG5ldyB2YWx1ZSB0byBhIGNoYXJhY3RlcmlzdGljXHJcbiAqIC0gR2V0IG5vdGlmaWVkIHdoZW4gY2hhcmFjdGVyaXN0aWMncyB2YWx1ZSBjaGFuZ2VzXHJcbiAqXHJcbiAqIEFkdmVydGlzaW5nIGluZm9ybWF0aW9uIGlzIHJldHVybmVkIHdoZW4gc2Nhbm5pbmcgZm9yIHBlcmlwaGVyYWxzLiBTZXJ2aWNlLCBjaGFyYWN0ZXJpc3RpYywgYW5kIHByb3BlcnR5IGluZm8gaXMgcmV0dXJuZWQgd2hlbiBjb25uZWN0aW5nIHRvIGEgcGVyaXBoZXJhbC4gQWxsIGFjY2VzcyBpcyB2aWEgc2VydmljZSBhbmQgY2hhcmFjdGVyaXN0aWMgVVVJRHMuIFRoZSBwbHVnaW4gbWFuYWdlcyBoYW5kbGVzIGludGVybmFsbHkuXHJcbiAqXHJcbiAqIFNpbXVsdGFuZW91cyBjb25uZWN0aW9ucyB0byBtdWx0aXBsZSBwZXJpcGhlcmFscyBhcmUgc3VwcG9ydGVkLlxyXG4gKlxyXG4gKiBAdXNhZ2VcclxuICpcclxuICogYGBgdHlwZXNjcmlwdFxyXG4gKlxyXG4gKiBpbXBvcnQgeyBCTEUgfSBmcm9tICdAaW9uaWMtbmF0aXZlL2JsZS9uZ3gnO1xyXG4gKlxyXG4gKiBjb25zdHJ1Y3Rvcihwcml2YXRlIGJsZTogQkxFKSB7IH1cclxuICpcclxuICogYGBgXHJcbiAqXHJcbiAqICMjIFBlcmlwaGVyYWwgRGF0YVxyXG4gKlxyXG4gKiBQZXJpcGhlcmFsIERhdGEgaXMgcGFzc2VkIHRvIHRoZSBzdWNjZXNzIGNhbGxiYWNrIHdoZW4gc2Nhbm5pbmcgYW5kIGNvbm5lY3RpbmcuIExpbWl0ZWQgZGF0YSBpcyBwYXNzZWQgd2hlbiBzY2FubmluZy5cclxuICpcclxuICogYGBgdHlwZXNjcmlwdFxyXG4gKiAgIHtcclxuICogICAgICAgJ25hbWUnOiAnQmF0dGVyeSBEZW1vJyxcclxuICogICAgICAgJ2lkJzogJzIwOkZGOkQwOkZGOkQxOkMwJyxcclxuICogICAgICAgJ2FkdmVydGlzaW5nJzogWzIsMSw2LDMsMywxNSwyNCw4LDksNjYsOTcsMTE2LDExNiwxMDEsMTE0LDEyMV0sXHJcbiAqICAgICAgICdyc3NpJzogLTU1XHJcbiAqICAgfVxyXG4gKiBgYGBcclxuICogQWZ0ZXIgY29ubmVjdGluZywgdGhlIHBlcmlwaGVyYWwgb2JqZWN0IGFsc28gaW5jbHVkZXMgc2VydmljZSwgY2hhcmFjdGVyaXN0aWMgYW5kIGRlc2NyaXB0b3IgaW5mb3JtYXRpb24uXHJcbiAqXHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogICB7XHJcbiAqICAgICAgICduYW1lJzogJ0JhdHRlcnkgRGVtbycsXHJcbiAqICAgICAgICdpZCc6ICcyMDpGRjpEMDpGRjpEMTpDMCcsXHJcbiAqICAgICAgICdhZHZlcnRpc2luZyc6IFsyLDEsNiwzLDMsMTUsMjQsOCw5LDY2LDk3LDExNiwxMTYsMTAxLDExNCwxMjFdLFxyXG4gKiAgICAgICAncnNzaSc6IC01NSxcclxuICogICAgICAgJ3NlcnZpY2VzJzogW1xyXG4gKiAgICAgICAgICAgJzE4MDAnLFxyXG4gKiAgICAgICAgICAgJzE4MDEnLFxyXG4gKiAgICAgICAgICAgJzE4MGYnXHJcbiAqICAgICAgIF0sXHJcbiAqICAgICAgICdjaGFyYWN0ZXJpc3RpY3MnOiBbXHJcbiAqICAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICAgJ3NlcnZpY2UnOiAnMTgwMCcsXHJcbiAqICAgICAgICAgICAgICAgJ2NoYXJhY3RlcmlzdGljJzogJzJhMDAnLFxyXG4gKiAgICAgICAgICAgICAgICdwcm9wZXJ0aWVzJzogW1xyXG4gKiAgICAgICAgICAgICAgICAgICAnUmVhZCdcclxuICogICAgICAgICAgICAgICBdXHJcbiAqICAgICAgICAgICB9LFxyXG4gKiAgICAgICAgICAge1xyXG4gKiAgICAgICAgICAgICAgICdzZXJ2aWNlJzogJzE4MDAnLFxyXG4gKiAgICAgICAgICAgICAgICdjaGFyYWN0ZXJpc3RpYyc6ICcyYTAxJyxcclxuICogICAgICAgICAgICAgICAncHJvcGVydGllcyc6IFtcclxuICogICAgICAgICAgICAgICAgICAgJ1JlYWQnXHJcbiAqICAgICAgICAgICAgICAgXVxyXG4gKiAgICAgICAgICAgfSxcclxuICogICAgICAgICAgIHtcclxuICogICAgICAgICAgICAgICAnc2VydmljZSc6ICcxODAxJyxcclxuICogICAgICAgICAgICAgICAnY2hhcmFjdGVyaXN0aWMnOiAnMmEwNScsXHJcbiAqICAgICAgICAgICAgICAgJ3Byb3BlcnRpZXMnOiBbXHJcbiAqICAgICAgICAgICAgICAgICAgICdSZWFkJ1xyXG4gKiAgICAgICAgICAgICAgIF1cclxuICogICAgICAgICAgIH0sXHJcbiAqICAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICAgJ3NlcnZpY2UnOiAnMTgwZicsXHJcbiAqICAgICAgICAgICAgICAgJ2NoYXJhY3RlcmlzdGljJzogJzJhMTknLFxyXG4gKiAgICAgICAgICAgICAgICdwcm9wZXJ0aWVzJzogW1xyXG4gKiAgICAgICAgICAgICAgICAgICAnUmVhZCdcclxuICogICAgICAgICAgICAgICBdLFxyXG4gKiAgICAgICAgICAgICAgICdkZXNjcmlwdG9ycyc6IFtcclxuICogICAgICAgICAgICAgICAgICAge1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgJ3V1aWQnOiAnMjkwMSdcclxuICogICAgICAgICAgICAgICAgICAgfSxcclxuICogICAgICAgICAgICAgICAgICAge1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgJ3V1aWQnOiAnMjkwNCdcclxuICogICAgICAgICAgICAgICAgICAgfVxyXG4gKiAgICAgICAgICAgICAgIF1cclxuICogICAgICAgICAgIH1cclxuICogICAgICAgXVxyXG4gKiAgIH1cclxuICogYGBgXHJcbiAqXHJcbiAqICMjIEFkdmVydGlzaW5nIERhdGFcclxuICogQmx1ZXRvb3RoIGFkdmVydGlzaW5nIGRhdGEgaXMgcmV0dXJuZWQgaW4gd2hlbiBzY2FubmluZyBmb3IgZGV2aWNlcy4gVGhlIGZvcm1hdCB2YXJpZXMgZGVwZW5kaW5nIG9uIHlvdXIgcGxhdGZvcm0uIE9uIEFuZHJvaWQgYWR2ZXJ0aXNpbmcgZGF0YSB3aWxsIGJlIHRoZSByYXcgYWR2ZXJ0aXNpbmcgYnl0ZXMuIGlPUyBkb2VzIG5vdCBhbGxvdyBhY2Nlc3MgdG8gcmF3IGFkdmVydGlzaW5nIGRhdGEsIHNvIGEgZGljdGlvbmFyeSBvZiBkYXRhIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBUaGUgYWR2ZXJ0aXNpbmcgaW5mb3JtYXRpb24gZm9yIGJvdGggQW5kcm9pZCBhbmQgaU9TIGFwcGVhcnMgdG8gYmUgYSBjb21iaW5hdGlvbiBvZiBhZHZlcnRpc2luZyBkYXRhIGFuZCBzY2FuIHJlc3BvbnNlIGRhdGEuXHJcbiAqXHJcbiAqICMjIyBBbmRyb2lkXHJcbiAqXHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogICB7XHJcbiAqICAgICAgICduYW1lJzogJ2RlbW8nLFxyXG4gKiAgICAgICAnaWQnOiAnMDA6MUE6N0Q6REE6NzE6MTMnLFxyXG4gKiAgICAgICAnYWR2ZXJ0aXNpbmcnOiBBcnJheUJ1ZmZlcixcclxuICogICAgICAncnNzaSc6IC0zN1xyXG4gKiAgfVxyXG4gKiBgYGBcclxuICpcclxuICogQ29udmVydCB0aGUgYWR2ZXJ0aXNpbmcgaW5mbyB0byBhIFVpbnQ4QXJyYXkgZm9yIHByb2Nlc3NpbmcuIGB2YXIgYWREYXRhID0gbmV3IFVpbnQ4QXJyYXkocGVyaXBoZXJhbC5hZHZlcnRpc2luZylgXHJcbiAqXHJcbiAqICMjIyBpT1NcclxuICpcclxuICogTm90ZSB0aGF0IGlPUyB1c2VzIHRoZSBzdHJpbmcgdmFsdWUgb2YgdGhlIGNvbnN0YW50cyBmb3IgdGhlIFtBZHZlcnRpc2VtZW50IERhdGEgUmV0cmlldmFsIEtleXNdKGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9saWJyYXJ5L2lvcy9kb2N1bWVudGF0aW9uL0NvcmVCbHVldG9vdGgvUmVmZXJlbmNlL0NCQ2VudHJhbE1hbmFnZXJEZWxlZ2F0ZV9Qcm90b2NvbC9pbmRleC5odG1sIy8vYXBwbGVfcmVmL2RvYy9jb25zdGFudF9ncm91cC9BZHZlcnRpc2VtZW50X0RhdGFfUmV0cmlldmFsX0tleXMpLiBUaGlzIHdpbGwgbGlrZWx5IGNoYW5nZSBpbiB0aGUgZnV0dXJlLlxyXG4gKlxyXG4gKiBgYGB0eXBlc2NyaXB0XHJcbiAqICAge1xyXG4gKiAgICAgICAnbmFtZSc6ICdkZW1vJyxcclxuICogICAgICAgJ2lkJzogJ0Q4NDc5QTRGLTc1MTctQkNEMy05MUI1LTMzMDJCMkY4MTgwMicsXHJcbiAqICAgICAgICdhZHZlcnRpc2luZyc6IHtcclxuICogICAgICAgICAgICdrQ0JBZHZEYXRhQ2hhbm5lbCc6IDM3LFxyXG4gKiAgICAgICAgICAgJ2tDQkFkdkRhdGFTZXJ2aWNlRGF0YSc6IHtcclxuICogICAgICAgICAgICAgICAnRkVEOCc6IHtcclxuICogICAgICAgICAgICAgICAgICAgJ2J5dGVMZW5ndGgnOiA3IC8vIGRhdGEgbm90IHNob3duXHJcbiAqICAgICAgICAgICAgICAgfVxyXG4gKiAgICAgICAgICAgfSxcclxuICogICAgICAgICAgICdrQ0JBZHZEYXRhTG9jYWxOYW1lJzogJ2RlbW8nLFxyXG4gKiAgICAgICAgICAgJ2tDQkFkdkRhdGFTZXJ2aWNlVVVJRHMnOiBbJ0ZFRDgnXSxcclxuICogICAgICAgICAgICdrQ0JBZHZEYXRhTWFudWZhY3R1cmVyRGF0YSc6IHtcclxuICogICAgICAgICAgICAgICAnYnl0ZUxlbmd0aCc6IDcgIC8vIGRhdGEgbm90IHNob3duXHJcbiAqICAgICAgICAgICB9LFxyXG4gKiAgICAgICAgICAgJ2tDQkFkdkRhdGFUeFBvd2VyTGV2ZWwnOiAzMixcclxuICogICAgICAgICAgICdrQ0JBZHZEYXRhSXNDb25uZWN0YWJsZSc6IHRydWVcclxuICogICAgICAgfSxcclxuICogICAgICAgJ3Jzc2knOiAtNTNcclxuICogICB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiAjIyBUeXBlZCBBcnJheXNcclxuICpcclxuICogVGhpcyBwbHVnaW4gdXNlcyB0eXBlZCBBcnJheXMgb3IgQXJyYXlCdWZmZXJzIGZvciBzZW5kaW5nIGFuZCByZWNlaXZpbmcgZGF0YS5cclxuICpcclxuICogVGhpcyBtZWFucyB0aGF0IHlvdSBuZWVkIGNvbnZlcnQgeW91ciBkYXRhIHRvIEFycmF5QnVmZmVycyBiZWZvcmUgc2VuZGluZyBhbmQgZnJvbSBBcnJheUJ1ZmZlcnMgd2hlbiByZWNlaXZpbmcuXHJcbiAqXHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogICAvLyBBU0NJSSBvbmx5XHJcbiAqICAgZnVuY3Rpb24gc3RyaW5nVG9CeXRlcyhzdHJpbmcpIHtcclxuICogICAgICB2YXIgYXJyYXkgPSBuZXcgVWludDhBcnJheShzdHJpbmcubGVuZ3RoKTtcclxuICogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0cmluZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICogICAgICAgICAgYXJyYXlbaV0gPSBzdHJpbmcuY2hhckNvZGVBdChpKTtcclxuICogICAgICAgfVxyXG4gKiAgICAgICByZXR1cm4gYXJyYXkuYnVmZmVyO1xyXG4gKiAgIH1cclxuICpcclxuICogICAvLyBBU0NJSSBvbmx5XHJcbiAqICAgZnVuY3Rpb24gYnl0ZXNUb1N0cmluZyhidWZmZXIpIHtcclxuICogICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XHJcbiAqICAgfVxyXG4gKiBgYGBcclxuICogWW91IGNhbiByZWFkIG1vcmUgYWJvdXQgdHlwZWQgYXJyYXlzIGluIHRoZXNlIGFydGljbGVzIG9uIFtNRE5dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvVHlwZWRfYXJyYXlzKSBhbmQgW0hUTUw1IFJvY2tzXShodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL3R1dG9yaWFscy93ZWJnbC90eXBlZF9hcnJheXMvKS5cclxuICpcclxuICogIyMgVVVJRHNcclxuICpcclxuICogVVVJRHMgYXJlIGFsd2F5cyBzdHJpbmdzIGFuZCBub3QgbnVtYmVycy4gU29tZSAxNi1iaXQgVVVJRHMsIHN1Y2ggYXMgJzIyMjAnIGxvb2sgbGlrZSBpbnRlZ2VycywgYnV0IHRoZXkncmUgbm90LiAoVGhlIGludGVnZXIgMjIyMCBpcyAweDhBQyBpbiBoZXguKSBUaGlzIGlzbid0IGEgcHJvYmxlbSB3aXRoIDEyOCBiaXQgVVVJRHMgc2luY2UgdGhleSBsb29rIGxpa2Ugc3RyaW5ncyA4MmI5ZTZlMS01OTNhLTQ1NmYtYmU5Yi05MjE1MTYwZWJjYWMuIEFsbCAxNi1iaXQgVVVJRHMgc2hvdWxkIGFsc28gYmUgcGFzc2VkIHRvIG1ldGhvZHMgYXMgc3RyaW5ncy5cclxuICpcclxuICogQGludGVyZmFjZXNcclxuICogQkxFU2Nhbk9wdGlvbnNcclxuICovXHJcbkBQbHVnaW4oe1xyXG4gIHBsdWdpbk5hbWU6ICdCTEUnLFxyXG4gIHBsdWdpbjogJ2NvcmRvdmEtcGx1Z2luLWJsZS1jZW50cmFsJyxcclxuICBwbHVnaW5SZWY6ICdibGUnLFxyXG4gIHJlcG86ICdodHRwczovL2dpdGh1Yi5jb20vZG9uL2NvcmRvdmEtcGx1Z2luLWJsZS1jZW50cmFsJyxcclxuICBwbGF0Zm9ybXM6IFsnQW5kcm9pZCcsICdpT1MnXSxcclxufSlcclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgQkxFIGV4dGVuZHMgSW9uaWNOYXRpdmVQbHVnaW4ge1xyXG4gIC8qKlxyXG4gICAqIFNjYW4gYW5kIGRpc2NvdmVyIEJMRSBwZXJpcGhlcmFscyBmb3IgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdGltZS5cclxuICAgKlxyXG4gICAqIEB1c2FnZVxyXG4gICAqIGBgYFxyXG4gICAqIEJMRS5zY2FuKFtdLCA1KS5zdWJzY3JpYmUoZGV2aWNlID0+IHtcclxuICAgKiAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGRldmljZSkpO1xyXG4gICAqIH0pO1xyXG4gICAqIGBgYFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlcnZpY2VzICBMaXN0IG9mIHNlcnZpY2UgVVVJRHMgdG8gZGlzY292ZXIsIG9yIGBbXWAgdG8gZmluZCBhbGwgZGV2aWNlc1xyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZWNvbmRzICBOdW1iZXIgb2Ygc2Vjb25kcyB0byBydW4gZGlzY292ZXJ5XHJcbiAgICogQHJldHVybnMge09ic2VydmFibGU8YW55Pn0gUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgbm90aWZpZXMgb2YgZWFjaCBwZXJpcGhlcmFsIHRoYXQgaXMgZGlzY292ZXJlZCBkdXJpbmcgdGhlIHNwZWNpZmllZCB0aW1lLlxyXG4gICAqL1xyXG4gIEBDb3Jkb3ZhKHtcclxuICAgIG9ic2VydmFibGU6IHRydWUsXHJcbiAgfSlcclxuICBzY2FuKHNlcnZpY2VzOiBzdHJpbmdbXSwgc2Vjb25kczogbnVtYmVyKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNjYW4gYW5kIGRpc2NvdmVyIEJMRSBwZXJpcGhlcmFscyB1bnRpbCBgc3RvcFNjYW5gIGlzIGNhbGxlZC5cclxuICAgKlxyXG4gICAqIEB1c2FnZVxyXG4gICAqIGBgYFxyXG4gICAqIEJMRS5zdGFydFNjYW4oW10pLnN1YnNjcmliZShkZXZpY2UgPT4ge1xyXG4gICAqICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZGV2aWNlKSk7XHJcbiAgICogfSk7XHJcbiAgICpcclxuICAgKiBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgKiAgIEJMRS5zdG9wU2NhbigpO1xyXG4gICAqIH0sIDUwMDApO1xyXG4gICAqIGBgYFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlcnZpY2VzICBMaXN0IG9mIHNlcnZpY2UgVVVJRHMgdG8gZGlzY292ZXIsIG9yIGBbXWAgdG8gZmluZCBhbGwgZGV2aWNlc1xyXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPGFueT59IFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG5vdGlmaWVzIG9mIGVhY2ggcGVyaXBoZXJhbCBkaXNjb3ZlcmVkLlxyXG4gICAqL1xyXG4gIEBDb3Jkb3ZhKHtcclxuICAgIG9ic2VydmFibGU6IHRydWUsXHJcbiAgICBjbGVhckZ1bmN0aW9uOiAnc3RvcFNjYW4nLFxyXG4gICAgY2xlYXJXaXRoQXJnczogZmFsc2UsXHJcbiAgfSlcclxuICBzdGFydFNjYW4oc2VydmljZXM6IHN0cmluZ1tdKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNjYW5zIGZvciBCTEUgZGV2aWNlcy4gVGhpcyBmdW5jdGlvbiBvcGVyYXRlcyBzaW1pbGFybHkgdG8gdGhlIGBzdGFydFNjYW5gIGZ1bmN0aW9uLCBidXQgYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGV4dHJhIG9wdGlvbnMgKGxpa2UgYWxsb3dpbmcgZHVwbGljYXRlIGRldmljZSByZXBvcnRzKS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzZXJ2aWNlcyAgTGlzdCBvZiBzZXJ2aWNlIFVVSURzIHRvIGRpc2NvdmVyLCBvciBgW11gIHRvIGZpbmQgYWxsIGRldmljZXNcclxuICAgKiBAcGFyYW0ge0JMRVNjYW5PcHRpb25zfSBvcHRpb25zIE9wdGlvbnNcclxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxhbnk+fSBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBub3RpZmllcyBvZiBlYWNoIHBlcmlwaGVyYWwgZGlzY292ZXJlZC5cclxuICAgKi9cclxuICBAQ29yZG92YSh7XHJcbiAgICBvYnNlcnZhYmxlOiB0cnVlLFxyXG4gICAgY2xlYXJGdW5jdGlvbjogJ3N0b3BTY2FuJyxcclxuICAgIGNsZWFyV2l0aEFyZ3M6IGZhbHNlLFxyXG4gIH0pXHJcbiAgc3RhcnRTY2FuV2l0aE9wdGlvbnMoc2VydmljZXM6IHN0cmluZ1tdLCBvcHRpb25zOiBCTEVTY2FuT3B0aW9ucyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdG9wIGEgc2NhbiBzdGFydGVkIGJ5IGBzdGFydFNjYW5gLlxyXG4gICAqXHJcbiAgICogQHVzYWdlXHJcbiAgICogYGBgXHJcbiAgICogQkxFLnN0YXJ0U2NhbihbXSkuc3Vic2NyaWJlKGRldmljZSA9PiB7XHJcbiAgICogICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShkZXZpY2UpKTtcclxuICAgKiB9KTtcclxuICAgKiBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgKiAgIEJMRS5zdG9wU2NhbigpLnRoZW4oKCkgPT4geyBjb25zb2xlLmxvZygnc2NhbiBzdG9wcGVkJyk7IH0pO1xyXG4gICAqIH0sIDUwMDApO1xyXG4gICAqIGBgYFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XHJcbiAgICovXHJcbiAgQENvcmRvdmEoKVxyXG4gIHN0b3BTY2FuKCk6IFByb21pc2U8YW55PiB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb25uZWN0IHRvIGEgcGVyaXBoZXJhbC5cclxuICAgKiBAdXNhZ2VcclxuICAgKiBgYGBcclxuICAgKiAgIEJMRS5jb25uZWN0KCcxMjozNDo1Njo3ODo5QTpCQycpLnN1YnNjcmliZShwZXJpcGhlcmFsRGF0YSA9PiB7XHJcbiAgICogICAgIGNvbnNvbGUubG9nKHBlcmlwaGVyYWxEYXRhKTtcclxuICAgKiAgIH0sXHJcbiAgICogICBwZXJpcGhlcmFsRGF0YSA9PiB7XHJcbiAgICogICAgIGNvbnNvbGUubG9nKCdkaXNjb25uZWN0ZWQnKTtcclxuICAgKiAgIH0pO1xyXG4gICAqIGBgYFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkZXZpY2VJZCBVVUlEIG9yIE1BQyBhZGRyZXNzIG9mIHRoZSBwZXJpcGhlcmFsXHJcbiAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxhbnk+fSBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBub3RpZmllcyBvZiBjb25uZWN0L2Rpc2Nvbm5lY3QuXHJcbiAgICovXHJcbiAgQENvcmRvdmEoe1xyXG4gICAgb2JzZXJ2YWJsZTogdHJ1ZSxcclxuICAgIGNsZWFyRnVuY3Rpb246ICdkaXNjb25uZWN0JyxcclxuICAgIGNsZWFyV2l0aEFyZ3M6IHRydWUsXHJcbiAgfSlcclxuICBjb25uZWN0KGRldmljZUlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRXN0YWJsaXNoIGFuIGF1dG9tYXRpYyBjb25uZWN0aW9uIHRvIGEgcGVyaXBoZXJhbC4gVGhlIHBob25lIHdpbGwgYXV0b21hdGljYWxseSBjb25uZWN0IHRvIHRoZSBCbHVldG9vdGggcGVyaXBoZXJhbFxyXG4gICAqIHdoZW5ldmVyIGl0IGlzIGluIHJhbmdlLiBUaGUgYXV0b0Nvbm5lY3QgZnVuY3Rpb24gdXNlcyBjYWxsYmFja3MgaW5zdGVhZCBvZiBvYnNlcnZhYmxlcyBiZWNhdXNlIGNvbm5lY3QgYW5kXHJcbiAgICogZGlzY29ubmVjdCBjYW4gZWFjaCBiZSBjYWxsZWQgbWFueSB0aW1lcyBhcyBhIGRldmljZXMgY29ubmVjdHMgYW5kIGRpc2Nvbm5lY3RzLlxyXG4gICAqXHJcbiAgICogT24gQW5kcm9pZCB5b3UgY2FuIHBhc3MgYSBNQUMgYWRkcmVzcyBkaXJlY3RseSB0byBhdXRvQ29ubmVjdC4gV2l0aCBpT1MsIHlvdSBuZWVkIHRvIGdldCBhIGRldmljZSBpZCBieSBzY2FubmluZyxcclxuICAgKiBjYWxsaW5nIGJsZS5wZXJpcGhlcmFsc1dpdGhJZGVudGlmaWVycywgb3IgY2FsbGluZyBibGUuY29ubmVjdGVkUGVyaXBoZXJhbHNXaXRoU2VydmljZXMuXHJcbiAgICpcclxuICAgKiBAdXNhZ2VcclxuICAgKiBgYGBcclxuICAgKiAgc29tZUZ1bmN0aW9uKCkge1xyXG4gICAqICAgIHRoaXMuYmxlLmF1dG9Db25uZWN0KGRldmljZUlkLCBvbkNvbm5lY3RlZC5iaW5kKHRoaXMpLCBvbkRpc2Nvbm5lY3RlZC5iaW5kKHRoaXMpKTtcclxuICAgKiAgfVxyXG4gICAqXHJcbiAgICogIG9uQ29ubmVjdGVkKHBlcmlwaGVyYWwpIHtcclxuICAgKiAgICBjb25zb2xlLmxvZyhgQ29ubmVjdGVkIHRvICR7cGVyaXBoZXJhbC5pZH1gKWxcclxuICAgKiAgfVxyXG4gICAqXHJcbiAgICogIG9uRGlzY29ubmVjdGVkKHBlcmlwaGVyYWwpIHtcclxuICAgKiAgICBjb25zb2xlLmxvZyhgRGlzY29ubmVjdGVkIGZyb20gJHtwZXJpcGhlcmFsLmlkfWApbFxyXG4gICAqICB9XHJcbiAgICpcclxuICAgKiBgYGBcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQgVVVJRCBvciBNQUMgYWRkcmVzcyBvZiB0aGUgcGVyaXBoZXJhbFxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNvbm5lY3RDYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aXRoIHBlcmlwaGVyYWwgZGF0YSB3aGVuIHRoZSBkZXZpY2VzIGNvbm5lY3RzXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gZGlzY29ubmVjdENhbGxiYWNrICBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aXRoIHBlcmlwaGVyYWwgZGF0YSB3aGVuIHRoZSBkZXZpY2VzIGRpc2Nvbm5lY3RzXHJcbiAgICovXHJcbiAgQENvcmRvdmEoeyBzeW5jOiB0cnVlIH0pXHJcbiAgYXV0b0Nvbm5lY3QoZGV2aWNlSWQ6IHN0cmluZywgY29ubmVjdENhbGxiYWNrOiBhbnksIGRpc2Nvbm5lY3RDYWxsYmFjazogYW55KSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXF1ZXN0IE1UVSBzaXplLlxyXG4gICAqIE1heSBiZSB1c2VkIHRvIGZpeCB0aGUgRXJyb3IgMTQgXCJVbmxpa2VseVwiIG9uIHdyaXRlIHJlcXVlc3RzIHdpdGggbW9yZSB0aGFuIDIwIGJ5dGVzLlxyXG4gICAqIEB1c2FnZVxyXG4gICAqIGBgYFxyXG4gICAqICAgQkxFLnJlcXVlc3RNdHUoJzEyOjM0OjU2Ojc4OjlBOkJDJywgNTEyKS50aGVuKCgpID0+IHtcclxuICAgKiAgICAgY29uc29sZS5sb2coJ01UVSBTaXplIEFjY2VwdGVkJyk7XHJcbiAgICogICB9LCBlcnJvciA9PiB7XHJcbiAgICogICAgIGNvbnNvbGUubG9nKCdNVFUgU2l6ZSBGYWlsZWQnKTtcclxuICAgKiAgIH0pO1xyXG4gICAqIGBgYFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkZXZpY2VJZCBVVUlEIG9yIE1BQyBhZGRyZXNzIG9mIHRoZSBwZXJpcGhlcmFsXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG10dVNpemUgVGhlIG5ldyBNVFUgc2l6ZS4gKDIzIC0gNTE3LCBkZWZhdWx0IGlzIHVzdWFsbHkgMjMuIE1heCByZWNvbW1lbmRlZDogNTEyKVxyXG4gICAqIEByZXR1cm4ge1Byb21pc2U8YW55Pn0gUmV0dXJucyBhIFByb21pc2UuXHJcbiAgICovXHJcbiAgQENvcmRvdmEoKVxyXG4gIHJlcXVlc3RNdHUoZGV2aWNlSWQ6IHN0cmluZywgbXR1U2l6ZTogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZnJlc2ggRGV2aWNlIENhY2hlXHJcbiAgICogVGhpcyBtZXRob2QgbWF5IGZpeCBhIGlzc3VlIG9mIG9sZCBjYWNoZWQgc2VydmljZXMgYW5kIGNoYXJhY3RlcmlzdGljcy5cclxuICAgKiBOT1RFIFNpbmNlIHRoaXMgdXNlcyBhbiB1bmRvY3VtZW50ZWQgQVBJIGl0J3Mgbm90IGd1YXJhbnRlZWQgdG8gd29yay5cclxuICAgKiBJZiB5b3UgY2hvb3NlIGEgdG9vIGxvdyBkZWxheSB0aW1lICh0aW1lb3V0TWlsbGlzKSB0aGUgbWV0aG9kIGNvdWxkIGZhaWwuXHJcbiAgICogQHVzYWdlXHJcbiAgICogYGBgXHJcbiAgICogICBCTEUucmVmcmVzaERldmljZUNhY2hlKCcxMjozNDo1Njo3ODo5QTpCQycsIDEwMDAwKS50aGVuKGRpc2NvdmVyZWRTZXJ2aWNlcyA9PiB7XHJcbiAgICogICAgIGNvbnNvbGUubG9nKCdUaGUgbmV3IGRpc2NvdmVyZWQgc2VydmljZXMgYWZ0ZXIgdGhlIGNsZWFuOiAnLCBkaXNjb3ZlcmVkU2VydmljZXMpO1xyXG4gICAqICAgfSwgZXJyb3IgPT4ge1xyXG4gICAqICAgICBjb25zb2xlLmxvZygnUmVmcmVzaCBkZXZpY2UgY2FjaGUgZmFpbGVkLicpO1xyXG4gICAqICAgfSk7XHJcbiAgICogYGBgXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZUlkIFVVSUQgb3IgTUFDIGFkZHJlc3Mgb2YgdGhlIHBlcmlwaGVyYWxcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZW91dE1pbGxpcyBEZWxheSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgcmVmcmVzaCBiZWZvcmUgZGlzY292ZXJpbmcgc2VydmljZXMuXHJcbiAgICogQHJldHVybiB7UHJvbWlzZTxhbnk+fSBSZXR1cm5zIGEgUHJvbWlzZS5cclxuICAgKi9cclxuICBAQ29yZG92YSgpXHJcbiAgcmVmcmVzaERldmljZUNhY2hlKGRldmljZUlkOiBzdHJpbmcsIHRpbWVvdXRNaWxsaXM6IG51bWJlcik6IFByb21pc2U8YW55PiB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEaXNjb25uZWN0IGZyb20gYSBwZXJpcGhlcmFsLlxyXG4gICAqIEB1c2FnZVxyXG4gICAqIGBgYFxyXG4gICAqICAgQkxFLmRpc2Nvbm5lY3QoJzEyOjM0OjU2Ojc4OjlBOkJDJykudGhlbigoKSA9PiB7XHJcbiAgICogICAgIGNvbnNvbGUubG9nKCdEaXNjb25uZWN0ZWQnKTtcclxuICAgKiAgIH0pO1xyXG4gICAqIGBgYFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkZXZpY2VJZCAgVVVJRCBvciBNQUMgYWRkcmVzcyBvZiB0aGUgcGVyaXBoZXJhbFxyXG4gICAqIEByZXR1cm4ge1Byb21pc2U8YW55Pn0gUmV0dXJucyBhIFByb21pc2VcclxuICAgKi9cclxuICBAQ29yZG92YSgpXHJcbiAgZGlzY29ubmVjdChkZXZpY2VJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlYWQgdGhlIHZhbHVlIG9mIGEgY2hhcmFjdGVyaXN0aWMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQgIFVVSUQgb3IgTUFDIGFkZHJlc3Mgb2YgdGhlIHBlcmlwaGVyYWxcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VydmljZVVVSUQgIFVVSUQgb2YgdGhlIEJMRSBzZXJ2aWNlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYXJhY3RlcmlzdGljVVVJRCAgVVVJRCBvZiB0aGUgQkxFIGNoYXJhY3RlcmlzdGljXHJcbiAgICogQHJldHVybiB7UHJvbWlzZTxhbnk+fSBSZXR1cm5zIGEgUHJvbWlzZVxyXG4gICAqL1xyXG4gIEBDb3Jkb3ZhKClcclxuICByZWFkKGRldmljZUlkOiBzdHJpbmcsIHNlcnZpY2VVVUlEOiBzdHJpbmcsIGNoYXJhY3RlcmlzdGljVVVJRDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFdyaXRlIHRoZSB2YWx1ZSBvZiBhIGNoYXJhY3RlcmlzdGljLlxyXG4gICAqIEB1c2FnZVxyXG4gICAqIGBgYFxyXG4gICAqIC8vIHNlbmQgMSBieXRlIHRvIHN3aXRjaCBhIGxpZ2h0IG9uXHJcbiAgICogdmFyIGRhdGEgPSBuZXcgVWludDhBcnJheSgxKTtcclxuICAgKiBkYXRhWzBdID0gMTtcclxuICAgKiBCTEUud3JpdGUoZGV2aWNlX2lkLCAnRkYxMCcsICdGRjExJywgZGF0YS5idWZmZXIpO1xyXG4gICAqXHJcbiAgICogLy8gc2VuZCBhIDMgYnl0ZSB2YWx1ZSB3aXRoIFJHQiBjb2xvclxyXG4gICAqIHZhciBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoMyk7XHJcbiAgICogZGF0YVswXSA9IDB4RkY7ICAvLyByZWRcclxuICAgKiBkYXRhWzBdID0gMHgwMDsgLy8gZ3JlZW5cclxuICAgKiBkYXRhWzBdID0gMHhGRjsgLy8gYmx1ZVxyXG4gICAqIEJMRS53cml0ZShkZXZpY2VfaWQsICdjY2MwJywgJ2NjYzEnLCBkYXRhLmJ1ZmZlcik7XHJcbiAgICpcclxuICAgKiAvLyBzZW5kIGEgMzIgYml0IGludGVnZXJcclxuICAgKiB2YXIgZGF0YSA9IG5ldyBVaW50MzJBcnJheSgxKTtcclxuICAgKiBkYXRhWzBdID0gY291bnRlcklucHV0LnZhbHVlO1xyXG4gICAqIEJMRS53cml0ZShkZXZpY2VfaWQsIFNFUlZJQ0UsIENIQVJBQ1RFUklTVElDLCBkYXRhLmJ1ZmZlcik7XHJcbiAgICpcclxuICAgKiBgYGBcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQgIFVVSUQgb3IgTUFDIGFkZHJlc3Mgb2YgdGhlIHBlcmlwaGVyYWxcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VydmljZVVVSUQgIFVVSUQgb2YgdGhlIEJMRSBzZXJ2aWNlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYXJhY3RlcmlzdGljVVVJRCAgVVVJRCBvZiB0aGUgQkxFIGNoYXJhY3RlcmlzdGljXHJcbiAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gdmFsdWUgIERhdGEgdG8gd3JpdGUgdG8gdGhlIGNoYXJhY3RlcmlzdGljLCBhcyBhbiBBcnJheUJ1ZmZlci5cclxuICAgKiBAcmV0dXJuIHtQcm9taXNlPGFueT59IFJldHVybnMgYSBQcm9taXNlXHJcbiAgICovXHJcbiAgQENvcmRvdmEoKVxyXG4gIHdyaXRlKGRldmljZUlkOiBzdHJpbmcsIHNlcnZpY2VVVUlEOiBzdHJpbmcsIGNoYXJhY3RlcmlzdGljVVVJRDogc3RyaW5nLCB2YWx1ZTogQXJyYXlCdWZmZXIpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogV3JpdGUgdGhlIHZhbHVlIG9mIGEgY2hhcmFjdGVyaXN0aWMgd2l0aG91dCB3YWl0aW5nIGZvciBjb25maXJtYXRpb24gZnJvbSB0aGUgcGVyaXBoZXJhbC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkZXZpY2VJZCAgVVVJRCBvciBNQUMgYWRkcmVzcyBvZiB0aGUgcGVyaXBoZXJhbFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZXJ2aWNlVVVJRCAgVVVJRCBvZiB0aGUgQkxFIHNlcnZpY2VcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhcmFjdGVyaXN0aWNVVUlEICBVVUlEIG9mIHRoZSBCTEUgY2hhcmFjdGVyaXN0aWNcclxuICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSB2YWx1ZSAgRGF0YSB0byB3cml0ZSB0byB0aGUgY2hhcmFjdGVyaXN0aWMsIGFzIGFuIEFycmF5QnVmZmVyLlxyXG4gICAqIEByZXR1cm4ge1Byb21pc2U8YW55Pn0gUmV0dXJucyBhIFByb21pc2VcclxuICAgKi9cclxuICBAQ29yZG92YSgpXHJcbiAgd3JpdGVXaXRob3V0UmVzcG9uc2UoXHJcbiAgICBkZXZpY2VJZDogc3RyaW5nLFxyXG4gICAgc2VydmljZVVVSUQ6IHN0cmluZyxcclxuICAgIGNoYXJhY3RlcmlzdGljVVVJRDogc3RyaW5nLFxyXG4gICAgdmFsdWU6IEFycmF5QnVmZmVyXHJcbiAgKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdGVyIHRvIGJlIG5vdGlmaWVkIHdoZW4gdGhlIHZhbHVlIG9mIGEgY2hhcmFjdGVyaXN0aWMgY2hhbmdlcy5cclxuICAgKlxyXG4gICAqIEB1c2FnZVxyXG4gICAqIGBgYFxyXG4gICAqIEJMRS5zdGFydE5vdGlmaWNhdGlvbihkZXZpY2VfaWQsICdGRjEwJywgJ0ZGMTEnKS5zdWJzY3JpYmUoYnVmZmVyID0+IHtcclxuICAgKiAgIGNvbnNvbGUubG9nKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XHJcbiAgICogfSk7XHJcbiAgICogYGBgXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQgIFVVSUQgb3IgTUFDIGFkZHJlc3Mgb2YgdGhlIHBlcmlwaGVyYWxcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VydmljZVVVSUQgIFVVSUQgb2YgdGhlIEJMRSBzZXJ2aWNlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYXJhY3RlcmlzdGljVVVJRCAgVVVJRCBvZiB0aGUgQkxFIGNoYXJhY3RlcmlzdGljXHJcbiAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxhbnk+fSBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBub3RpZmllcyBvZiBjaGFyYWN0ZXJpc3RpYyBjaGFuZ2VzLlxyXG4gICAqIFRoZSBvYnNlcnZlciBlbWl0IGFuIGFycmF5IHdpdGggZGF0YSBhdCBpbmRleCAwIGFuZCBzZXF1ZW5jZSBvcmRlciBhdCBpbmRleCAxLlxyXG4gICAqIFRoZSBzZXF1ZW5jZSBvcmRlciBpcyBhbHdheXMgdW5kZWZpbmVkIG9uIGlPUy4gT24gYW5kcm9pZCBpdCBsZWF2ZSB0aGUgY2xpZW50IHRvIGNoZWNrIHRoZSBzZXF1ZW5jZSBvcmRlciBhbmQgcmVvcmRlciBpZiBuZWVkZWRcclxuICAgKi9cclxuICBAQ29yZG92YSh7XHJcbiAgICBvYnNlcnZhYmxlOiB0cnVlLFxyXG4gICAgZGVzdHJ1Y3Q6IHRydWUsXHJcbiAgICBjbGVhckZ1bmN0aW9uOiAnc3RvcE5vdGlmaWNhdGlvbicsXHJcbiAgICBjbGVhcldpdGhBcmdzOiB0cnVlLFxyXG4gIH0pXHJcbiAgc3RhcnROb3RpZmljYXRpb24oZGV2aWNlSWQ6IHN0cmluZywgc2VydmljZVVVSUQ6IHN0cmluZywgY2hhcmFjdGVyaXN0aWNVVUlEOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RvcCBiZWluZyBub3RpZmllZCB3aGVuIHRoZSB2YWx1ZSBvZiBhIGNoYXJhY3RlcmlzdGljIGNoYW5nZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQgIFVVSUQgb3IgTUFDIGFkZHJlc3Mgb2YgdGhlIHBlcmlwaGVyYWxcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VydmljZVVVSUQgIFVVSUQgb2YgdGhlIEJMRSBzZXJ2aWNlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYXJhY3RlcmlzdGljVVVJRCAgVVVJRCBvZiB0aGUgQkxFIGNoYXJhY3RlcmlzdGljXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cclxuICAgKi9cclxuICBAQ29yZG92YSgpXHJcbiAgc3RvcE5vdGlmaWNhdGlvbihkZXZpY2VJZDogc3RyaW5nLCBzZXJ2aWNlVVVJRDogc3RyaW5nLCBjaGFyYWN0ZXJpc3RpY1VVSUQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXBvcnQgdGhlIGNvbm5lY3Rpb24gc3RhdHVzLlxyXG4gICAqXHJcbiAgICogQHVzYWdlXHJcbiAgICogYGBgXHJcbiAgICogQkxFLmlzQ29ubmVjdGVkKCdGRkNBMEIwOS1DQjFELTREQzAtQTFFRi0zMUFGRDNFREZCNTMnKS50aGVuKFxyXG4gICAqICAgKCkgPT4geyBjb25zb2xlLmxvZygnY29ubmVjdGVkJyk7IH0sXHJcbiAgICogICAoKSA9PiB7IGNvbnNvbGUubG9nKCdub3QgY29ubmVjdGVkJyk7IH1cclxuICAgKiApO1xyXG4gICAqIGBgYFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkZXZpY2VJZCAgVVVJRCBvciBNQUMgYWRkcmVzcyBvZiB0aGUgcGVyaXBoZXJhbFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XHJcbiAgICovXHJcbiAgQENvcmRvdmEoKVxyXG4gIGlzQ29ubmVjdGVkKGRldmljZUlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVwb3J0IGlmIGJsdWV0b290aCBpcyBlbmFibGVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgaWYgQmx1ZXRvb3RoIGlzIGVuYWJsZWQsIGFuZCByZWplY3RzIGlmIGRpc2FibGVkLlxyXG4gICAqL1xyXG4gIEBDb3Jkb3ZhKClcclxuICBpc0VuYWJsZWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZWdpc3RlciB0byBiZSBub3RpZmllZCB3aGVuIEJsdWV0b290aCBzdGF0ZSBjaGFuZ2VzIG9uIHRoZSBkZXZpY2UuXHJcbiAgICpcclxuICAgKiBAdXNhZ2VcclxuICAgKiBgYGBcclxuICAgKiBCTEUuc3RhcnRTdGF0ZU5vdGlmaWNhdGlvbnMoKS5zdWJzY3JpYmUoc3RhdGUgPT4ge1xyXG4gICAqICAgY29uc29sZS5sb2coXCJCbHVldG9vdGggaXMgXCIgKyBzdGF0ZSk7XHJcbiAgICogfSk7XHJcbiAgICogYGBgXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPGFueT59IFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG5vdGlmaWVzIHdoZW4gdGhlIEJsdWV0b290aCBpcyBlbmFibGVkIG9yIGRpc2FibGVkIG9uIHRoZSBkZXZpY2UuXHJcbiAgICovXHJcbiAgQENvcmRvdmEoe1xyXG4gICAgb2JzZXJ2YWJsZTogdHJ1ZSxcclxuICAgIGNsZWFyRnVuY3Rpb246ICdzdG9wU3RhdGVOb3RpZmljYXRpb25zJyxcclxuICAgIGNsZWFyV2l0aEFyZ3M6IGZhbHNlLFxyXG4gIH0pXHJcbiAgc3RhcnRTdGF0ZU5vdGlmaWNhdGlvbnMoKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0b3Agc3RhdGUgbm90aWZpY2F0aW9ucy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XHJcbiAgICovXHJcbiAgQENvcmRvdmEoKVxyXG4gIHN0b3BTdGF0ZU5vdGlmaWNhdGlvbnMoKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9wZW4gU3lzdGVtIEJsdWV0b290aCBzZXR0aW5ncyAoQW5kcm9pZCBvbmx5KS5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XHJcbiAgICovXHJcbiAgQENvcmRvdmEoKVxyXG4gIHNob3dCbHVldG9vdGhTZXR0aW5ncygpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRW5hYmxlIEJsdWV0b290aCBvbiB0aGUgZGV2aWNlIChBbmRyb2lkIG9ubHkpLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cclxuICAgKi9cclxuICBAQ29yZG92YSgpXHJcbiAgZW5hYmxlKCk6IFByb21pc2U8YW55PiB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZWFkIHRoZSBSU1NJIHZhbHVlIG9uIHRoZSBkZXZpY2UgY29ubmVjdGlvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkZXZpY2VJZCAgVVVJRCBvciBNQUMgYWRkcmVzcyBvZiB0aGUgcGVyaXBoZXJhbFxyXG4gICAqXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cclxuICAgKi9cclxuICBAQ29yZG92YSgpXHJcbiAgcmVhZFJTU0koZGV2aWNlSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZXMgYSBsaXN0IG9mIHRoZSBwZXJpcGhlcmFscyAoY29udGFpbmluZyBhbnkgb2YgdGhlIHNwZWNpZmllZCBzZXJ2aWNlcylcclxuICAgKiBjdXJyZW50bHkgY29ubmVjdGVkIHRvIHRoZSBzeXN0ZW0uIFRoZSBwZXJpcGhlcmFsIGxpc3QgaXMgc2VudCB0byB0aGUgc3VjY2VzcyBjYWxsYmFjay5cclxuICAgKiBpT1Mgb25seVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gc2VydmljZXMgTGlzdCBvZiBzZXJ2aWNlcyB0byBkaXNjb3ZlclxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59IFJldHVybnMgYSBwcm9taXNlIHdpdGggYSBsaXN0IG9mIHBlcmlwaGVyYWwgb2JqZWN0c1xyXG4gICAqL1xyXG4gIEBDb3Jkb3ZhKClcclxuICBjb25uZWN0ZWRQZXJpcGhlcmFsc1dpdGhTZXJ2aWNlcyhzZXJ2aWNlczogc3RyaW5nW10pOiBQcm9taXNlPGFueVtdPiB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGaW5kIHRoZSBjb25uZWN0ZWQgcGVyaXBoZXJhbHMgb2ZmZXJpbmcgdGhlIGxpc3RlZCBzZXJ2aWNlIFVVSURzLlxyXG4gICAqIGlPUyBvbmx5XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB1dWlkcyBMaXN0IG9mIHBlcmlwaGVyYWwgVVVJRHNcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fSBSZXR1cm5zIGEgcHJvbWlzZSB3aXRoIGEgbGlzdCBvZiBwZXJpcGhlcmFsIG9iamVjdHNcclxuICAgKi9cclxuICBAQ29yZG92YSgpXHJcbiAgcGVyaXBoZXJhbHNXaXRoSWRlbnRpZmllcnModXVpZHM6IHN0cmluZ1tdKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmluZCB0aGUgYm9uZGVkIGRldmljZXNcclxuICAgKiBBbmRyb2lkIG9ubHlcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59IFJldHVybnMgYSBwcm9taXNlIHdpdGggYSBsaXN0IG9mIHBlcmlwaGVyYWwgb2JqZWN0c1xyXG4gICAqL1xyXG4gIEBDb3Jkb3ZhKClcclxuICBib25kZWREZXZpY2VzKCk6IFByb21pc2U8YW55W10+IHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlcG9ydHMgaWYgbG9jYXRpb24gc2VydmljZXMgYXJlIGVuYWJsZWQuXHJcbiAgICogQW5kcm9pZCBvbmx5XHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cclxuICAgKi9cclxuICBAQ29yZG92YSgpXHJcbiAgaXNMb2NhdGlvbkVuYWJsZWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG59XHJcbiJdfQ==